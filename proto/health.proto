syntax = "proto3";

package l8health;

option java_multiple_files = true;
option java_outer_classname = "L8Health";
option java_package = "com.types.l8health";
option go_package = "./types/l8health";

import "services.proto";
import "api.proto";

enum L8HealthState {
  Invalid_State = 0;
  Up = 1;
  Down = 2;
  Unreachable = 3;
}

message L8HealthList {
  repeated L8Health list = 1;
  l8api.L8Counts counts = 2;
}

message L8Health {
  string a_uuid = 1;
  string z_uuid = 2;
  string alias = 3;
  l8services.L8Services services = 4;
  L8HealthState status = 5;
  L8HealthStats stats = 6;
  int64 start_time = 7;
  bool is_vnet = 8;
}

message L8HealthStats {
  int64 last_msg_time = 1;
  int64 tx_msg_count = 2;
  int64 tx_data_count = 3;
  int64 rx_msg_count = 4;
  int64 rx_data_cont = 5;
  uint64 memory_usage = 6;
  double cpu_usage = 7;
}

message L8Top {
  map<string, L8Health> healths = 1;
}